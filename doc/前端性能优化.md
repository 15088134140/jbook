> 作者：*Mark*　　来源：*原创*　　同步发布：*[www.jsin.net](http://www.jsin.net)*   GitHub：*[jbook](https://github.com/15088134140/jbook/tree/master/doc)*  
> *转载请注明出处*   

因为浏览器为显示页面而进行的重排和重绘是不可避免且非常耗资源的，所以前端性能的优化其主要工作就是优化重排和重绘。

## 减少DOM操作
原生的JS和传统的JS库（如JQ），都是直接对页面DOM元素进行操作，而对DOM的操作势必会引起重排和重绘，因此，减少DOM操作的次数是一个很好的优化手段。  

假如我们要为`ul`添加100个`li`，方法有两种：  

方法1：一个一个`li`加进去。（100次重排100次重绘）   
方法2：准备100个`li`批量加进去。（1次重排1次重绘）   

显而易见，方法2更加高效，将100次DOM操作缩减为了1次
```js
var ul = document.querySelector('ul');

// bad
for(var i = 0; i < 100; i++) {
  var li = document.createElement('li');
  ul.appendChild(li);
}

// good
var fragment = document.createDocumentFragment();
for(var i = 0; i < 100; i++) {
  var li = document.createElement('li');
  fragment.appendChild(li);
}
ul.appendChild(fragment);

// good
var lis = []
for(var i = 0; i < 100; i++) {
  var li = document.createElement('li');
  lis.push(li);
}
$(ul).append(lis);
```   

通过`DocumentFragment`可以打包一组待添加的元素，然后将整体添加到真实DOM树中。   

*[DocumentFragment](https://developer.mozilla.org/zh-CN/docs/Web/API/DocumentFragment)*  了解一下。

很多JS库都提供批量操作DOM的接口，如上述代码所示的`append`，在实际开发过程中可以多加使用。    

另外`MVVM`框架（如vue，angular等）增加了 `ViewModel` 层，通过双向数据绑定把 `View` 层和 `Model` 层连接了起来，用数据来驱动界面显示，很大程度的减少了对DOM的直接操作。   

*[MVVM双向绑定原理](https://juejin.im/entry/5996654451882524382f43db)*  了解一下。   

## 适当保存变量

## 减少全局变量

## 减少不必要DOM元素和嵌套

## DOM的读写操作不要交替进行

## 批量改变样式

## 尽量避免复杂选择器的使用

## 减少HTTP请求

## 规范使用HTTP请求

## 延迟或异步加载资源

## 压缩资源大小

## 避免用cookie存储数据

## HTML标签语义化

## 参考
*[网页性能管理详解 - 阮一峰的网络日志](http://www.ruanyifeng.com/blog/2015/09/web-page-performance-in-depth.html)*   

*[浏览器前端优化](https://juejin.im/entry/59105474ac502e0065505aca)*